<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Fiction - Game</title>
    <link rel="stylesheet" href="./css/game.css">
</head>

<body>
    <div class="game-container">
        <!-- ç§»åŠ¨ç«¯é®ç½©å±‚ -->
        <div class="overlay" id="overlay"></div>
        
        <div class="game-header">
            <!-- ç§»åŠ¨ç«¯èœå•æŒ‰é’® -->
            <button class="menu-toggle" id="menuToggle">â˜°</button>
            <div class="game-title">ğŸ® äº’åŠ¨å°è¯´æ¸¸æˆ</div>
            <button class="back-btn" onclick="window.location.href='index.html'">â† è¿”å›ä¸Šä¼ é¡µé¢</button>
            <button class="back-btn-sm" onclick="window.location.href='index.html'">è¿”å›</button>
        </div>

        <!-- çŠ¶æ€é¢æ¿ -->
        <div class="status-panel" id="statusPanel">
            <!-- è¿æ¥çŠ¶æ€ -->
            <div class="status-section">
                <h3>ğŸ”— è¿æ¥çŠ¶æ€</h3>
                <div class="connection-status">
                    <span id="statusIndicator">âš«</span>
                    <span id="statusText">æœªè¿æ¥</span>
                </div>
            </div>

            <div class="status-section">
                <h3>ğŸ“Š è§’è‰²ä¿¡æ¯</h3>
                <div class="status-item">
                    <span class="status-label">å§“å:</span>
                    <span class="status-value" id="charName">ç©å®¶</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ç­‰çº§:</span>
                    <span class="status-value" id="charLevel">1</span>
                </div>
                <div class="status-item">
                    <span class="status-label">ç”Ÿå‘½å€¼:</span>
                    <span class="status-value" id="charHealth">100/100</span>
                </div>
                <div class="health-bar">
                    <div class="health-fill" id="healthFill" style="width: 100%"></div>
                </div>
                <div class="status-item">
                    <span class="status-label">èƒ½é‡:</span>
                    <span class="status-value" id="charEnergy">100/100</span>
                </div>
                <div class="energy-bar">
                    <div class="energy-fill" id="energyFill" style="width: 100%"></div>
                </div>
                <div class="status-item">
                    <span class="status-label">é‡‘é’±:</span>
                    <span class="status-value" id="charMoney">0</span>
                </div>
            </div>

            <div class="status-section">
                <h3>âš¡ å±æ€§</h3>
                <div class="attribute-grid" id="attributeGrid">
                    <!-- å±æ€§å°†ä»PDFåŠ¨æ€åŠ è½½ -->
                    <p style="color: #999; font-size: 0.85em; text-align: center;">åŠ è½½ä¸­...</p>
                </div>
            </div>

            <div class="status-section">
                <h3>ğŸ’ èƒŒåŒ… (<span id="inventoryCount">0</span>)</h3>
                <div id="inventoryList">
                    <p style="color: #999; font-size: 0.85em; text-align: center;">ç©ºçš„</p>
                </div>
            </div>

            <div class="status-section">
                <h3>ğŸ“ å½“å‰ä½ç½®</h3>
                <div style="color: #333; font-weight: 600;" id="charLocation">èµ·å§‹ç‚¹</div>
            </div>
        </div>

        <div class="chat-area" id="chatArea">
            <div class="hint">
                æ¬¢è¿ï¼è¾“å…¥ <strong>"å¼€å§‹æ¸¸æˆ"</strong> æˆ– <strong>"start game"</strong> å¼€å§‹ä½ çš„å†’é™©ã€‚
            </div>
        </div>

        <div class="input-area">
            <button class="start-game-btn" id="startGameBtn" onclick="startGameWithButton()">ğŸ® å¼€å§‹æ¸¸æˆ</button>
            <div class="input-row">
                <input type="text" class="input-field" id="playerInput" placeholder="åœ¨è¿™é‡Œè¾“å…¥ä½ çš„è¡ŒåŠ¨..."
                    onkeypress="handleKeyPress(event)" />
                <button class="send-btn" id="sendBtn" onclick="sendAction()">å‘é€</button>
            </div>
        </div>
    </div>

    <!-- Markdownæ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.6/marked.min.js"></script>
    <script src="game.js"></script>
    <script>
        // ä¾§è¾¹æ æ§åˆ¶å‡½æ•°
        function toggleSidebar() {
            const sidebar = document.getElementById('statusPanel');
            const overlay = document.getElementById('overlay');
            const menuToggle = document.getElementById('menuToggle');
            
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            
            // æ›´æ–°èœå•å›¾æ ‡
            if (sidebar.classList.contains('active')) {
                menuToggle.textContent = 'âœ•';
            } else {
                menuToggle.textContent = 'â˜°';
            }
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        document.addEventListener('DOMContentLoaded', function() {
            // ç‚¹å‡»é®ç½©å±‚å…³é—­ä¾§è¾¹æ 
            document.getElementById('overlay').addEventListener('click', function() {
                toggleSidebar();
            });

            // ç‚¹å‡»èœå•æŒ‰é’®åˆ‡æ¢ä¾§è¾¹æ 
            document.getElementById('menuToggle').addEventListener('click', function(e) {
                e.stopPropagation();
                toggleSidebar();
            });
        });

    </script>
</body>

</html>